@model Uebungsprojekt.ViewModel.Administration.SimulationInfrastructureViewModel
@{
    ViewData["Title"] = "Simulation";
    Layout = "_PlanerLayout";
}
<h1 class="page-title">@ViewData["Title"]</h1>
<br />
<body>
    <div class="main_content">
        <div class="two">
            <h4>Edit Infrastructure</h4>
            <button onclick="locationFunction()">AddLocation</button>
        </div>
        <div class="three">
            <form action="#" id="mainform" method="get" name="mainform">
                <span id="myForm"></span>
                <p></p><input type="submit" value="Submit">
            </form>
        </div>
    </div>
</body>

<!--
    todo:   change column to multi select
            fix deletion so that if a location gets deletet all zones also get deleted; same for zones and columns (maybe by using more id variables)
            fix adding to only latest created location zones
            fix bug when first adding a location(instant deletion of said location)
-->

<script>
    var i = 0; /* location id */
    var j = 0;
    function increment() {
        i += 1;
    }

    function incrementj() {
        j += 1;
    }
    /*
    ---------------------------------------------
    
    Function to Remove Form Elements Dynamically
    ---------------------------------------------
    
    */
    function removeElement(parentDiv, childDiv) {
        if (childDiv == parentDiv) {
            alert("The parent div cannot be removed.");
        }
        else if (document.getElementById(childDiv)) {
            var child = document.getElementById(childDiv);
            var parent = document.getElementById(parentDiv);
            parent.removeChild(child);
        }
        else {
            alert("Child div has already been removed or does not exist.");
            return false;
        }
    }
    /*
    ----------------------------------------------------------------------------
    
    Functions that will be called upon, when user click on the Location text field.
    
    ----------------------------------------------------------------------------
    */
    function locationFunction() {
        var spa = document.createElement('span');   // span to add a location
        var inp = document.createElement("INPUT");  // input field to enter location name
        var del = document.createElement("button"); // delete button
        var cz = document.createElement("button");  // add charging zone to location
        var br = document.createElement("br");      // simple break for visibility
        var id;

        inp.setAttribute("type", "text");
        inp.setAttribute("placeholder", "Location");
        increment();
        id = i;
        inp.setAttribute("Location", "textelement_" + id);
        spa.appendChild(inp)

        del.textContent = "Delete"
        del.setAttribute("onclick", "removeElement('myForm','loc_" + id + "')");
        spa.appendChild(del);

        spa.setAttribute("id", "loc_" + id);

        document.getElementById("myForm").appendChild(spa);

        cz.textContent = "AddChargingZone";
        cz.setAttribute("onclick", "chargingZoneFunction(" + id + ")");
        spa.appendChild(cz);
        
        spa.appendChild(br);
    }

    function chargingZoneFunction(int idLoc) {
        var spa = document.createElement('span');   // span to add a chargin zone
        var inp = document.createElement("INPUT");  // input field to enter charging zone name
        var del = document.createElement("button"); // delete button
        var cz = document.createElement("button");  // add charging column to charging zone
        var br = document.createElement("br");      // simple break for visibility

        inp.setAttribute("type", "text");
        inp.setAttribute("placeholder", "Charging Zone");
        incrementj();
        inp.setAttribute("ChargingZone", "textelement_" + j);
        spa.appendChild(inp)

        del.textContent = "Delete"
        del.setAttribute("onclick", "removeElement('loc_" + idLoc + "','cz_" + j + "')");
        spa.appendChild(del);

        spa.setAttribute("id", "cz_" + j);

        document.getElementById("'loc_" + idLoc + "'").appendChild(spa);

        cz.textContent = "AddChargingColumn";
        cz.setAttribute("onclick", "chargingColumnFunction()");
        spa.appendChild(cz);

        spa.appendChild(br);
    }

    function chargingColumnFunction() {
        var r = document.createElement('span');
        var y = document.createElement("INPUT");
        y.setAttribute("type", "text");
        y.setAttribute("placeholder", "ChargingColumn");
        var g = document.createElement("button");
        increment();
        y.setAttribute("ChargingColumn", "textelement_" + i);
        g.textContent = "Delete"
        y.setAttribute("style", "margin-left: 100px")
        r.appendChild(y);
        g.setAttribute("onclick", "removeElement('myForm','id_" + i + "')");
        r.appendChild(g);
        r.setAttribute("id", "id_" + i);
        document.getElementById("myForm").appendChild(r);
        var br = document.createElement("br");
        r.appendChild(br);
    }
    /*
    function resetElements() {
        document.getElementById('myForm').innerHTML = '';
    }
    */
</script>